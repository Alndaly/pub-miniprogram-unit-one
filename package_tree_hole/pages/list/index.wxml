<view class="back-button" style="height: {{back_btn_height}}px;width: {{back_btn_width}}px;top: {{back_btn_top}}px;left: {{back_btn_left}}px;" catchtap="goBack">
  返回
</view>

<view class="page" style="padding-top: {{CustomBar}}px;">
  <view class="scroll-box-none" wx:if="{{!treeHole.total_size}}">{{poem.detail}}</view>
  <scroll-view wx:else="{{!treeHole.total_size}}" class="scroll-box" bindscrolltolower="onNextPage" refresher-enabled scroll-y bindrefresherrefresh="onRefresh" refresher-triggered="{{refresherTriggered}}" show-scrollbar="{{true}}">
    <view class="card-list">
      <view wx:for="{{treeHole.list}}" wx:key="id" data-tree_hole="{{item}}">
        <tree-hole-card tree_hole="{{item}}"></tree-hole-card>
      </view>
    </view>
    <block wx:if="{{isLoading}}">
      <view class="cu-load {{'loading'}} text-white"></view>
    </block>
  </scroll-view>

  <view class="bottom">
    <view class="identity" catchtap="onChangeIdentity">
      <van-image class="person" round fit="cover" height="25px" width="25px" lazy-load src="{{identity.avatar}}"></van-image>
      <view class="identity-nickname">
        {{identity.name}}
      </view>
    </view>
    <view catchtap="goToSendPage" class="send-button">
      前往发卡片
    </view>
  </view>
</view>

<page-container round z-index="10000" show="{{showChangeIdentityPopUp}}">
  <view class="bottom-pop-box">
    <view class="identity-box {{identity.name?'':'text-grey'}}">
      <van-image class="person" round fit="cover" height="30px" width="30px" lazy-load src="{{identity.avatar}}"></van-image>
      <view>
        {{identity.name?identity.name:'暂无'}}
      </view>
    </view>
    <view class="regenerate-box" catchtap="reGenerateIdentity">
      <view class="dice-box" style="{{reGenerating?'animation: rotate 0.5s infinite linear;':''}}">
        <view class="dice-side side1"></view>
        <view class="dice-side side2"></view>
        <view class="dice-side side3"></view>
        <view class="dice-side side4"></view>
        <view class="dice-side side5"></view>
        <view class="dice-side side6"></view>
      </view>
      <view class="text-grey">点击骰子重置（点数不代表结果）</view>
    </view>
  </view>
</page-container>